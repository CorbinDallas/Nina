<!DOCTYPE html>
<html>
<head>
    <title>Nina UI Demo - ajax</title>
    <style type="text/css">
        body {
            background:#808080;
        }
        button {
            display: block;
        }
    </style>
    <script type="text/javascript" src="https://rawgithub.com/CorbinDallas/Nina/master/lib/core.js"></script>
    <script type="text/javascript" src="https://rawgithub.com/CorbinDallas/Nina/master/lib/style/dialog.js"></script>
    <script type="text/javascript" src="https://rawgithub.com/CorbinDallas/Nina/master/lib/dialog.js"></script>
    <script type="text/javascript" src="https://rawgithub.com/CorbinDallas/Nina/master/lib/style/taskBar.js"></script>
    <script type="text/javascript" src="https://rawgithub.com/CorbinDallas/Nina/master/lib/taskBar.js"></script>
    <script type="text/javascript" src="https://rawgithub.com/CorbinDallas/Nina/master/lib/ajax.js"></script>
    <script type="text/javascript">
        function getUploadStatus(b) {
            var t = b.innerHTML;
            var x = Nina.ajax({
                method: 'GetUploadStatusJson.GetUploadStatus',
                parameters: [Nina.createUUID()],
                procedure: function (e) {
                    showMessage(b, e.Message, t);
                }
            });
        }
        function createTestAccount(b) {
            var t = b.innerHTML;
            var x = Nina.ajax({
                method: 'Authentication.CreateAccount',
                parameters: ['Test', '1234'],
                procedure: function (e) {
                    showMessage(b, e.Message, t);
                }
            });
        }
        function createTestAccountAndLogon(b) {
            var t = b.innerHTML;
            var x = Nina.ajax([
                {
                    method: 'Authentication.CreateAccount',
                    parameters: ['Test', '1234'],
                    procedure: function (e) {
                        showMessage(b, e.Message, t);
                    }
                },
                {
                    method: 'Authentication.Logon',
                    parameters: ['Test', '1234'],
                    procedure: function (e) {
                        showMessage(b, e.Message, t);
                    }
                }
            ]);
        }
        function createContact(b) {
            var t = b.innerHTML;
            var x = Nina.ajax({
                method: 'Contact.UpdateContact',
                parameters: ['E8BE19E8-81AE-4BDF-96A0-C2E484228343', '7e9c2fd1-8c02-4389-ae38-ae3c8f4af7fe', 'First', 'Middle', 'Last', 
                    'Address', 'Address2', 'City', 'State', 'Zip', 'Email', 'Company', 'Title', 'WebAddress', 'IMAddress', 'Fax', 
                    'Home', 'Work', 'Mobile', 'Notes', -4],
                procedure: function (e) {
                    showMessage(b, e.Message, t);
                }
            });
        }
        function uploadContactWithLargeData(b) {
            var t = b.innerHTML;
            var x = Nina.ajax({
                method: 'Contact.UpdateContact',
                parameters: ['E8BE19E8-81AE-4BDF-96A0-C2E484228343', '7e9c2fd1-8c02-4389-ae38-ae3c8f4af7fe', 'First', 'Middle', 'Last',
                    'Address', 'Address2', 'City', 'State', 'Zip', 'Email', 'Company', 'Title', 'WebAddress', 'IMAddress', 'Fax',
                    'Home', 'Work', 'Mobile', document.getElementById('largeText').value, -4],
                procedure: function (e) {
                    showMessage(b, e.Message, t);
                }
            });
        }
        function createTwoAccounts(b) {
            var t = b.innerHTML;
            var x = Nina.ajax([
                {
                    method: 'Authentication.CreateAccount',
                    parameters: ['Test', '1234'],
                    procedure: function(e) {
                        showMessage(b, e.Message, t);
                    }
                },
                {
                    method: 'Authentication.CreateAccount',
                    parameters: ['Test2', '1234'],
                    procedure: function(e) {
                        showMessage(b, e.Message, t);
                    }
                }
            ]);

        }
        function uploadFilesMultiMultiField(b) {
            var t = b.innerHTML;
            var f1 = document.getElementById('file1');
            var f2 = document.getElementById('file2');
            var x = Nina.ajax({
                method: 'FileManager.UploadFiles',
                parameters: [['~\\', '~\\', '~\\', '~\\'], [f1,f2]],
                procedure: function (e) {
                    showMessage(b, e.Message, t);
                },
                context: this
            });
        }
        function uploadFilesMultiField(b) {
            var t = b.innerHTML;
            var f1 = document.getElementById('file1');
            var x = Nina.ajax({
                method: 'FileManager.UploadFiles',
                parameters: [['~\\', '~\\'], [f1]],
                procedure: function (e) {
                    showMessage(b, e.Message, t);
                },
                context: this
            });
        }
        function uploadFiles(b) {
            var t = b.innerHTML;
            var f1 = document.getElementById('file1');
            var f2 = document.getElementById('file2');
            var x = Nina.ajax({
                method: 'FileManager.UploadFiles',
                parameters: [['~\\','~\\'], [f1,f2]],
                procedure: function (e) {
                    showMessage(b, e.Message, t);
                },
                context: this
            });
        }
        function uploadFile(b) {
            var f1 = document.getElementById('file1');
            var t = b.innerHTML;
            var x = Nina.ajax({
                    method: 'FileManager.Upload',
                    parameters: ['~\\', f1],
                    procedure: function (e) {
                        showMessage(b, e.Message, t);
                    }
                },
                {
                    progress:function (e) {
                        b.innerHTML = Math.round((e.loaded / e.total) * 100) + ' %';
                    }
                });
        }
        function showMessage(obj,msg,timeoutMsg,delay) {
            obj.innerHTML = msg;
            setTimeout(function() {
                obj.innerHTML = timeoutMsg;
            },delay || 2000);
        }
    </script>
</head>
<body>
    <button onclick="createTestAccount(this);">Create Test Account (call one method)</button>
    <button onclick="createContact(this);">Create Contact (call one method)</button>
    <button onclick="uploadContactWithLargeData(this);">Create Contact With Large Data (call one method with large post data)</button>
    <button onclick="createTestAccountAndLogon(this);">Create Test Account and Logon (call two methods)</button>
    <button onclick="createTwoAccounts(this);">Create two accounts (call the same method twice in one request)</button>
    <button onclick="uploadFile(this);">Upload a file (one field)</button>
    <button onclick="uploadFiles(this);">Upload files from two fields (one per two fields)</button>
    <button onclick="uploadFilesMultiField(this);">Upload multiple files from one field (two in one field)</button>
    <button onclick="uploadFilesMultiMultiField(this);">Upload multiple files from two fields (expects 2 in each filed)</button>
    <button onclick="getUploadStatus(this);">Get Upload Status</button>
        
<hr />
    Large Data Goes here:<br />
    <textarea id="largeText" style="width:500px"></textarea><br/>
    File 1 <input id="file1" type="file"  multiple="multiple" /><br/>
    File 2<input id="file2" type="file"  multiple="multiple"/>
</body>
</html>
